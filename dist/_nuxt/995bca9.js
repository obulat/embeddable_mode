(window.webpackJsonp=window.webpackJsonp||[]).push([[48,31],{409:function(e,t,r){"use strict";r.r(t);var n={name:"RelatedImages",props:["relatedImages","imagesCount","query","filter","isPrimaryImageLoaded"]},o=r(7),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"photo_related-images"},[r("h3",{staticClass:"b-header"},[e._v("\n    "+e._s(e.$t("photo-details.related-images"))+"\n  ")]),e._v(" "),!0===e.isPrimaryImageLoaded?r("SearchGridManualLoad",{attrs:{"images-count":e.imagesCount,images:e.relatedImages,query:e.query,filter:e.filter,"include-analytics":!1,"use-infinite-scroll":!1,"include-add-to-list":!1}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SearchGridManualLoad:r(342).default})},474:function(e,t,r){"use strict";(function(e){var r={socialSharing:"ENABLED"===e.env.SOCIAL_SHARING};t.a=r}).call(this,r(125))},499:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(4),d=(r(36),r(13),r(37),r(11),r(12),r(10),r(19),r(20),r(23),r(68)),l=r.n(d),c=r(44),m=r(474),h=r(5),f=r(1);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var w={name:"PhotoDetailPage",layout:function(e){return e.store.state.isEmbedded?"embedded-with-nav-search":"with-nav-search"},props:{id:{type:String,default:""}},data:function(){return{breadCrumbURL:"",hasClarifaiTags:!1,imagecountseparator:"of",isPrimaryImageLoaded:!1,shouldShowBreadcrumb:!1,imageWidth:0,imageHeight:0,imageType:"Unknown",socialSharingEnabled:m.a.socialSharing}},computed:Object(c.d)({relatedImages:"relatedImages",filter:"query.filter",images:"images",imagesCount:"imagesCount",query:"query",tags:"image.tags",image:"image"}),watch:{image:function(){this.getRelatedImages()}},asyncData:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.env,n=e.route,t.abrupt("return",{thumbnailURL:"".concat(r.apiUrl,"thumbs/").concat(n.params.id)});case 2:case"end":return t.stop()}}),t)})))()},fetch:function(e){return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.store,n=e.route,o=e.error,d=e.app,!(r.state.relatedImages&&r.state.relatedImages.length>0)){t.next=4;break}return t.next=4,r.dispatch(f.B,{relatedImages:[],relatedImageCount:0});case 4:return t.prev=4,t.next=7,Promise.all([r.dispatch(h.d,{id:n.params.id}),r.dispatch(h.g,{id:n.params.id})]);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),o({statusCode:404,message:d.i18n.t("error.image-not-found",{id:n.params.id})});case 12:case"end":return t.stop()}}),t,null,[[4,9]])})))()},beforeRouteEnter:function(e,t,r){r((function(e){"/search/"!==t.path&&"/search/image"!==t.path||(e.shouldShowBreadcrumb=!0,e.breadCrumbURL=t.fullPath)}))},methods:v(v(v({},Object(c.b)([h.g,h.d])),Object(c.c)([f.v,f.B])),{},{onImageLoaded:function(e){var t=this;this.imageWidth=e.target.naturalWidth,this.imageHeight=e.target.naturalHeight,this.isPrimaryImageLoaded=!0,l.a.head(e.target.src).then((function(e){t.imageType=e.headers["content-type"]}))},getRelatedImages:function(){this.image&&this.image.id&&this[h.g]({id:this.image.id})}})},O=r(7),component=Object(O.a)(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{"aria-label":e.$t("photo-details.aria.main")}},[r("PhotoDetails",{attrs:{image:e.image,thumbnail:e.thumbnailURL,"bread-crumb-u-r-l":e.breadCrumbURL,"should-show-breadcrumb":e.shouldShowBreadcrumb,query:e.query,"image-width":e.imageWidth,"image-height":e.imageHeight,"image-type":e.imageType,"social-sharing-enabled":e.socialSharingEnabled},on:{onImageLoaded:e.onImageLoaded}}),e._v(" "),r("div",{staticClass:"padding-normal margin-vertical-big"},[r("PhotoTags",{attrs:{tags:e.tags,"show-header":!0}})],1),e._v(" "),r("aside",{staticClass:"padding-normal margin-vertical-big",attrs:{"aria-label":e.$t("photo-details.aria.related")}},[r("RelatedImages",{attrs:{"related-images":e.relatedImages,"images-count":e.imagesCount,query:e.query,filter:e.filter,"is-primary-image-loaded":e.isPrimaryImageLoaded}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{PhotoDetails:r(483).default,PhotoTags:r(300).default,RelatedImages:r(409).default})}}]);