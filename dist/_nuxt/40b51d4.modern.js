(window.webpackJsonp=window.webpackJsonp||[]).push([[48,31],{353:function(e,t,r){"use strict";r.r(t);var n={name:"RelatedImages",props:["relatedImages","imagesCount","query","filter","isPrimaryImageLoaded"]},o=r(6),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"photo_related-images"},[r("h3",{staticClass:"b-header"},[e._v("\n    "+e._s(e.$t("photo-details.related-images"))+"\n  ")]),e._v(" "),!0===e.isPrimaryImageLoaded?r("SearchGridManualLoad",{attrs:{"images-count":e.imagesCount,images:e.relatedImages,query:e.query,filter:e.filter,"include-analytics":!1,"use-infinite-scroll":!1,"include-add-to-list":!1}}):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{SearchGridManualLoad:r(286).default})},418:function(e,t,r){"use strict";(function(e){var r={socialSharing:"ENABLED"===e.env.SOCIAL_SHARING};t.a=r}).call(this,r(83))},442:function(e,t,r){"use strict";r.r(t);var n=r(4),o=r(3),d=(r(9),r(10),r(8),r(40)),l=r.n(d),m=r(25),c=r(418),h=r(5),f=r(0);function y(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function v(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?y(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):y(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var O={name:"PhotoDetailPage",layout(e){var{store:t}=e;return t.state.isEmbedded?"embedded-with-nav-search":"with-nav-search"},props:{id:{type:String,default:""}},data:()=>({breadCrumbURL:"",hasClarifaiTags:!1,imagecountseparator:"of",isPrimaryImageLoaded:!1,shouldShowBreadcrumb:!1,imageWidth:0,imageHeight:0,imageType:"Unknown",socialSharingEnabled:c.a.socialSharing}),computed:Object(m.d)({relatedImages:"relatedImages",filter:"query.filter",images:"images",imagesCount:"imagesCount",query:"query",tags:"image.tags",image:"image"}),watch:{image(){this.getRelatedImages()}},asyncData:e=>Object(o.a)((function*(){var{env:t,route:r}=e;return{thumbnailURL:"".concat(t.apiUrl,"thumbs/").concat(r.params.id)}}))(),fetch:e=>Object(o.a)((function*(){var{store:t,route:r,error:n,app:o}=e;t.state.relatedImages&&t.state.relatedImages.length>0&&(yield t.dispatch(f.B,{relatedImages:[],relatedImageCount:0}));try{yield Promise.all([t.dispatch(h.d,{id:r.params.id}),t.dispatch(h.g,{id:r.params.id})])}catch(e){n({statusCode:404,message:o.i18n.t("error.image-not-found",{id:r.params.id})})}}))(),beforeRouteEnter(e,t,r){r((e=>{"/search/"!==t.path&&"/search/image"!==t.path||(e.shouldShowBreadcrumb=!0,e.breadCrumbURL=t.fullPath)}))},methods:v(v(v({},Object(m.b)([h.g,h.d])),Object(m.c)([f.v,f.B])),{},{onImageLoaded(e){this.imageWidth=e.target.naturalWidth,this.imageHeight=e.target.naturalHeight,this.isPrimaryImageLoaded=!0,l.a.head(e.target.src).then((e=>{this.imageType=e.headers["content-type"]}))},getRelatedImages(){this.image&&this.image.id&&this[h.g]({id:this.image.id})}})},I=r(6),component=Object(I.a)(O,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{"aria-label":e.$t("photo-details.aria.main")}},[r("PhotoDetails",{attrs:{image:e.image,thumbnail:e.thumbnailURL,"bread-crumb-u-r-l":e.breadCrumbURL,"should-show-breadcrumb":e.shouldShowBreadcrumb,query:e.query,"image-width":e.imageWidth,"image-height":e.imageHeight,"image-type":e.imageType,"social-sharing-enabled":e.socialSharingEnabled},on:{onImageLoaded:e.onImageLoaded}}),e._v(" "),r("div",{staticClass:"padding-normal margin-vertical-big"},[r("PhotoTags",{attrs:{tags:e.tags,"show-header":!0}})],1),e._v(" "),r("aside",{staticClass:"padding-normal margin-vertical-big",attrs:{"aria-label":e.$t("photo-details.aria.related")}},[r("RelatedImages",{attrs:{"related-images":e.relatedImages,"images-count":e.imagesCount,query:e.query,filter:e.filter,"is-primary-image-loaded":e.isPrimaryImageLoaded}})],1)],1)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{PhotoDetails:r(427).default,PhotoTags:r(244).default,RelatedImages:r(353).default})}}]);